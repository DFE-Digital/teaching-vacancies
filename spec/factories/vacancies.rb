FactoryBot.define do
  job_titles = ["Teacher of Science  (opportunity exists for the right candidate for Head of Physics and/or KS4 Lead)",
                "PROGRESS LEADER (HEAD OF DEPARTMENT) FOR RS, PSHE, RSE AND CITIZENSHIP EDUCATION  WITH TLR 2.3 £6698",
                "Teacher of Music (Part-time, permanent) to include Music Performance Enhancement project  for 1 year",
                "Teacher of Maths MPS (A recruitment and retention point will be offered to the successful candidate)",
                "Primary teacher for children with Social, Emotional and Mental Health (SEMH) needs (1 year contract)",
                "Teacher of MFL (Spanish with the ability to teach French or German at Key Stage 3) (Maternity Cover)",
                "Head Teacher St Martin & St Mary Primary School Windermere Cumbria (the Lake District National Park)",
                "Full or Part Time Teacher/Tutor of English and/or Maths and/or Science for 1:1  small group tuition ",
                "Teacher of Art within ADT Dept (Secondary) Maternity Cover (1 Yr) with possibility of permanent post",
                "Teacher of Business Studies / Health and Social Care (TLR may be available for a suitable candidate)",
                "Assistant Head Teacher - Pastoral & Well-Being, Designated Safeguarding & Looked After Children Lead",
                "Class Teacher - This role is for a new school, opening on 1st Sept 2021 in Bishop's Stortford North.",
                "We will shortly be recruiting for NQTs and Heads of Departments in various subjects (new school)..  ",
                "Science Teachers (1 year full time contract) (part time considered) starting Summer/Autumn Term 2020",
                "Teacher of Science (Any Science specialism, but with the ability to teach outside of the specialism)",
                "Teacher of Business Studies and Economics (suitable for NQTs). TLR available for experienced teacher",
                "Head of Year (pref. able to teach any of the following subjects: Eng, Media, RS, Maths, S. Sciences)",
                "Cross-Curricular Teacher - East Leeds Educational Centre for Training (ELECT) - Temporary for 1 Year",
                "Teacher with Phase Leader responsibility for pupils with Special Educational Needs (mainly to teach in KS3-KS4)",
                "Teacher of Geography", "Year 4 Class Teacher", "Teacher of Girls' PE", "Head of MFL (French)",
                "Teacher of RE & PSHE", "Teacher of Economics", "KS5 Geography Leader", "KS1/KS2 Phase Leader",
                "Year 6 Class Teacher", "Subject Leader Maths", "Teacher of Chemistry", "Female Teacher of PE",
                "Teacher of Computing", "Assistant Principal ", "Class Teacher (EYFS)", "1:1 English Tutor/s ",
                "Teacher of PE (male)", "Games Design Teacher", "Team Leader of Maths", "KEY STAGE 2 TEACHER ",
                "Mathematics Teacher ", "ICT Network Manager ", "Early Years Educator", "Year 3 Class Teacher",
                "Teacher of Business ", "Teacher of Girl's PE", "Programme Leader MFL", "Year 1 Class Teacher",
                "Teacher of PE (Boys)", "Sikh Studies Teacher", "Teacher of English  ", "Teacher of Religious Education",
                "Teacher of R.E and Citizenship", "Teacher of English (Permanent)", "Creative Industries Technician",
                "Finance and Resource Director ", "Teacher of History (Part-Time)", "Maths Teacher - September 2020",
                "Part-time Teacher of Sociology", "KS2 Part time teacher (Year 5)", "Teacher of Mathematics 0.6 FTE",
                "Teacher of Design & Technology", "Temporary Teacher of Geography", "Lead in Health and Social Care",
                "Director of Learning - Science", "Teacher of Science", "Teacher of English"]

  salaries = ["MPR 1 (£24,373 per annum)", "Main pay range 1 to Upper pay range 3, £23,719 to £39,406 per year (full-time equivalent)",
              "£6,084 to £6,084 per year (full-time equivalent)", "Main pay range 2 to Upper pay range 3, £30,113 to £44,541",
              "Main pay range 1 to Upper pay range 3, £30,480 to £49,571", "MPR / UPR  ", "MPS/UPS ",
              "£25,543 to £41,635 per year (full-time equivalent)", "M1-UP3 £25,714 - £41,604 ",
              "£18,795 to £20,344 per year (full-time equivalent)",
              "Main pay range 1 to Main pay range 6, £23,720,.00 to £35,008,.00 per year (full-time equivalent)",
              "MPS / UPS and possibility of TLR ", "£18,795 to £19,171 per year (full-time equivalent)",
              "£46,684 to £54,120", "MPR (UPR for a very strong candidate)",
              "MPS", "Main pay range 1 to Main pay range 6, £24,859 to £34,253",
              "£29,096 to £39,702", "£29,371 - £41,604",
              "Main pay range 1 to Upper pay range 3, £23,720 to £39,406", "Main pay range 1 to Main pay range 6, £23,720 to £35,008",
              "Teachers’ Main / Upper Pay Scale ", "Main pay range 1 to Upper pay range 3, £24,373 to £40,490",
              "£25,079 – £36,227 (FTE)", "Upper pay range 1 to Upper pay range 3, £37,654 to £40,490",
              "MPS/UPS", "tms - ups", "23080-25481",
              "Main/UP Scale [+future possibility of TLR2 award]", "Lead Practitioners range 1 to Lead Practitioners range 5, £41,065 to £45,319",
              "Main pay range 2 to Upper pay range 3, £26,041 to £40,490",
              "Main pay range 1 to Main pay range 6, £24,373 to £35,971 per year (full-time equivalent)",
              "Lead Practitioners range 7 to Lead Practitioners range 11, £47,707 to £52,643",
              "Lead Practitioners range 4 to Lead Practitioners range 4, £46,208 to £46,208", "M1 £25,714 to UPS3 £41,604 ",
              "MPR/UPR", "£16,168 to £17,369", "Main pay range 1 to Main pay range 6, £23,720 to £34,665",
              "Main pay range 1 to Upper pay range 3, £23,719 to £39,406", "MPS/UPS TLR1A (£8,291)",
              "Main pay range 1 to Upper pay range 3, £27,595 to £43,348",
              "Main pay range 1 to Main pay range 6, £25,543 per year (full-time equivalent)",
              "£32,157 - £42,624 per annum", "Main pay range 1 to Upper pay range 3, £23,720 to £39,406 per year (full-time equivalent)",
              "Main / Upper Pay Scale (£25,714 to £41,807)", "Inner London Pay Scales", "L1 - L2  £42,195-£43,251 (dependent on experience)",
              "29,577 - 32,234", "£24,373 to £40,490",
              "Main pay range 1 to Upper pay range 3, £14,232 to £23,643,.60 per year pro rata", "MPR to UPR",
              "MPS/UPS £32,157 - £50,935 per annum", "Up to £40,489 depending on experience.  NQT/MPS/UPS",
              "To be determined depending on qualifications and experience",
              "Teaching Assistant – West Sussex County Council G3 in the range of £18,562 to £18,933 p.a. pro-rata of full time equivalent Midday \"
            Meals Supervisor in the range of grade G2 £18,198 to £18,562 p.a. pro-rata of full time equivalent",
              "Age 18 -20 £14,314 fte (Actual Salary £5,378 pro rata - £7.34 pr hour inc holiday pay Age 21 - 22 £16,508 fte (Actual Salary "\
              "£6,202 pro rata £8.47 pr hour inc holiday pay Age 23+ £18,508 fte (Actual Salary £6,755 pro rata £9.22 pr hour inc holiday pay",
              "M1", "Grade 3 - £18,933 - £20,092 FTE (Actual Salary £15,472 - £16,419)",
              "Main pay range 1 to Upper pay range 3, £24,859 to £40,520 per year (full-time equivalent)",
              "Main pay range 1 to Upper pay range 3, £29,663 to £48,244", "MPR/UPS", "£25,750 to £39,964", "MS/UPS ",
              "Main pay range 4 to Upper pay range 1, £29,194 to £36,646", "Main pay range 1 to Upper pay range 3, £23,716 to £39,404",
              "Main pay range 1 to Upper pay range 3, £28,355 to £44,541"]

  factory :vacancy do
    publisher

    job_location { "at_one_school" }
    about_school { Faker::Lorem.paragraph(sentence_count: rand(5..10)) }
    enable_job_applications { true }
    benefits { Faker::Lorem.paragraph(sentence_count: rand(1..3)) }
    completed_step { 7 }
    contact_email { Faker::Internet.email }
    contact_number { "01234 123456" }
    contract_type { :fixed_term }
    contract_type_duration { "6 months" }
    expires_at { 6.months.from_now.change(hour: 9, minute: 0, second: 0) }
    hired_status { nil }
    job_advert { Faker::Lorem.paragraph(sentence_count: rand(50..300)) }
    job_roles { %i[teacher leadership sen_specialist nqt_suitable].sample(rand(1..4)) }
    job_title { job_titles.sample }
    listed_elsewhere { nil }
    personal_statement_guidance { Faker::Lorem.paragraph(sentence_count: rand(5..10)) }
    publish_on { Date.current }
    salary { salaries.sample }
    school_visits { Faker::Lorem.paragraph(sentence_count: rand(5..10)) }
    starts_on { 1.year.from_now.to_date }
    status { :published }
    subjects { SUBJECT_OPTIONS.sample(2).map(&:first).sort! }
    suitable_for_nqt { ["no"] }
    working_patterns { %w[full_time part_time job_share].sample }

    trait :no_tv_applications do
      application_link { Faker::Internet.url(host: "example.com") }
      enable_job_applications { false }
      how_to_apply { Faker::Lorem.paragraph(sentence_count: 4) }
      personal_statement_guidance { "" }
    end

    trait :central_office do
      job_location { "central_office" }
      readable_job_location { I18n.t("publishers.organisations.readable_job_location.central_office") }
    end

    trait :at_one_school do
      job_location { "at_one_school" }
      readable_job_location { Faker::Educator.secondary_school.strip.delete("'") }
    end

    trait :at_multiple_schools do
      job_location { "at_multiple_schools" }
      readable_job_location { "More than one school (2)" }
    end

    trait :fail_minimum_validation do
      job_advert { Faker::Lorem.paragraph[0..5] }
      job_title { Faker::Job.title[0..2] }
    end

    trait :fail_maximum_validation do
      job_advert { Faker::Lorem.characters(number: 50_001) }
      job_title { Faker::Lorem.characters(number: 150) }
      salary { Faker::Lorem.characters(number: 257) }
    end

    trait :starts_asap do
      starts_on { nil }
      starts_asap { true }
    end

    trait :draft do
      status { :draft }
    end

    trait :trashed do
      status { :trashed }
    end

    trait :published do
      status { :published }
    end

    trait :published_slugged do
      status { :published }
      sequence(:slug) { |n| "slug-#{n}" }
    end

    trait :expired do
      to_create { |instance| instance.save(validate: false) }
      status { :published }
      sequence(:slug) { |n| "slug-#{n}" }
      publish_on { Date.current - 1.month }
      expires_at { 2.weeks.ago.change(hour: 9, minute: 0) }
    end

    trait :expired_yesterday do
      expires_at { 1.day.ago.change(hour: 9, minute: 0) }
    end

    trait :expired_years_ago do
      expires_at { 2.years.ago.change(hour: 9, minute: 0) }
    end

    trait :expires_tomorrow do
      expires_at { 1.day.from_now.change(hour: 9, minute: 0) }
    end

    trait :future_publish do
      status { :published }
      publish_on { Date.current + 6.months }
      expires_at { 2.years.from_now.change(hour: 9, minute: 0) }
    end

    trait :past_publish do
      status { :published }
      sequence(:slug) { |n| "slug-#{n}" }
      publish_on { Date.current - 1.day }
      expires_at { 2.months.from_now.change(hour: 9, minute: 0) }
      starts_on { Date.current + 3.months }
    end

    trait :without_working_patterns do
      to_create { |instance| instance.save(validate: false) }
      sequence(:slug) { |n| "slug-#{n}" }
      working_patterns { nil }
    end

    trait :with_feedback do
      listed_elsewhere { :listed_paid }
      hired_status { :hired_tvs }
    end

    trait :suitable_for_nqt do
      suitable_for_nqt { "yes" }
      job_roles { %w[nqt_suitable] }
    end

    trait :not_suitable_for_nqt do
      suitable_for_nqt { "no" }
      job_roles { %w[] }
    end

    trait :with_supporting_documents do
      supporting_documents do
        [
          Rack::Test::UploadedFile.new(
            Rails.root.join("spec", "fixtures", "files", "blank_job_spec.pdf"),
            "application/pdf",
          ),
        ]
      end
    end
  end
end

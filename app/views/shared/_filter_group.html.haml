-# Usage to include filter group
-#
-# = render partial: 'shared/filter_group', locals: {
-#   filters: {
-#     :title => 'filter group heading',
-#     :removeButtons => <Boolean>,
-#     :f => f,
-#     :items => [
-#       { :options => <Array>, :title => 'Working patterns'},
-#       { :options => <Array>, :title => 'Subjects', :search => true }
-#     ]
-#   }
-# }

.accordion-group.govuk-accordion{ id: 'accordion-default', data: { module: "govuk-accordion"} }

  - if filters.present? && filters[:removeButtons]
    .govuk-accordion__section.govuk-accordion__title.moj-filter
      .govuk-accordion__section-header.moj-filter__header
        %h3.govuk-accordion__section-heading.accordion-group-heading
          %span.govuk-accordion__section-button.moj-filter__heading-title{ id: "accordion-default-heading-title" }
            %h2.govuk-heading-s
              = filters[:title]

      .govuk-accordion__section-content{ id: "accordion-default-content-title", aria: { labelledby: "accordion-default-heading-title" } }
        .moj-filter__content
          .moj-filter__selected
            .selected-filters__heading{ class: 'govuk-!-margin-bottom-2' }
              .govuk-body{ class: 'govuk-!-margin-bottom-0' }
                = 'Selected filters'
              %a.govuk-link.govuk-link--no-visited-state{ href: ''}
                = 'Clear filters'

            - filters[:items].each do |group|
              .govuk-heading-s{ class: 'govuk-!-margin-bottom-0' }
                = group[:title]

              %ul.moj-filter-tags
                %li
                  %button.moj-filter__tag{ data: { group: group[:key], key: 'Accounting' } }
                    %span.govuk-visually-hidden
                      = 'Remove this filter'
                    = 'Accounting'
                    %i.fa.fa-close

  - filters[:items].each_with_index do |group, index|
    .govuk-accordion__section.accordion-content__group
      .govuk-accordion__section-header
        %h3.govuk-accordion__section-heading
          %span.govuk-accordion__section-button{ id: "accordion-default-heading-#{index}" }
            = group[:title]

      .govuk-accordion__section-content{ id: "accordion-default-content-#{index}", aria: { labelledby: "accordion-default-heading-#{index}" } }
        = render 'shared/checkbox_group', f: f,
          search: filter[:search],
          attribute_name: filter[:attribute],
          options: filter[:options],
          value_method: filter[:value_method],
          text_method: filter[:text_method],
          hint_method: filter[:hint_method],
          small: filter[:small]

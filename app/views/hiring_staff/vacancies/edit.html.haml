- content_for :page_title_prefix, "Edit the #{@vacancy.job_title} job for #{current_school.name}"

=render partial: 'school_vacancy_breadcrumb'

.govuk-grid-row
  .govuk-grid-column-two-thirds
    %h1.govuk-heading-l
      = t('jobs.edit_heading', school: @vacancy.school.name)

.vacancy.govuk-grid-row
  .govuk-grid-column-two-thirds

    %h2.govuk-heading-m.mb0
      = t('jobs.job_specification')

    .govuk-body-s.mb1
      = link_to edit_school_job_job_specification_path(@vacancy.id), class: 'govuk-link', 'aria-label': t('jobs.aria_labels.change_job_specification') do
        Change
        %span.govuk-visually-hidden the job specification

    %dl.app-check-your-answers.app-check-your-answers--short

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.job_title')
        %dd.app-check-your-answers__answer
          = @vacancy.job_title
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'job_title'), 'aria-label': t('jobs.aria_labels.change_job_title'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.description')
        %dd.app-check-your-answers__answer
          = @vacancy.job_description
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'job_description'), 'aria-label': t('jobs.aria_labels.change_job_description'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.main_subject')
        %dd.app-check-your-answers__answer
          = @vacancy.main_subject
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'main_subject'), 'aria-label': t('jobs.aria_labels.change_main_subject'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.first_supporting_subject')
        %dd.app-check-your-answers__answer
          = @vacancy.first_supporting_subject
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'first_supporting_subject'), 'aria-label': t('jobs.aria_labels.change_first_supporting_subject'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.second_supporting_subject')
        %dd.app-check-your-answers__answer
          = @vacancy.second_supporting_subject
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'second_supporting_subject'), 'aria-label': t('jobs.aria_labels.change_second_supporting_subject'), class: 'govuk-link'

      - if @vacancy.working_patterns?
        .app-check-your-answers__contents
          %dt.app-check-your-answers__question
            = t('jobs.working_patterns')
          %dd.app-check-your-answers__answer
            = @vacancy.working_patterns
            - if @vacancy.flexible_working?
              = @vacancy.flexible_working
          %dd.app-check-your-answers__change
            = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'working_patterns'), 'aria-label': t('jobs.aria_labels.change_working_patterns'), class: 'govuk-link'

      - if @vacancy.weekly_hours?
        .app-check-your-answers__contents
          %dt.app-check-your-answers__question
            = t('jobs.weekly_hours')
          %dd.app-check-your-answers__answer
            = @vacancy.weekly_hours
          %dd.app-check-your-answers__change
            = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'weekly_hours'), 'aria-label': t('jobs.aria_labels.change_weekly_hours'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.pay_scale')
        %dd.app-check-your-answers__answer
          =@vacancy.pay_scale_range
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'pay_scale_range'), 'aria-label': t('jobs.aria_labels.change_pay_scale'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.salary_range')
        %dd.app-check-your-answers__answer
          = @vacancy.salary_range("to")
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'salary_range'), 'aria-label': t('jobs.aria_labels.change_salary_range'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.newly_qualified_teacher')
        %dd.app-check-your-answers__answer
          = @vacancy.newly_qualified_teacher
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'newly_qualified_teacher'), 'aria-label': t('jobs.aria_labels.newly_qualified_teacher'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.benefits')
        %dd.app-check-your-answers__answer
          = @vacancy.benefits
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'benefits'), 'aria-label': t('jobs.aria_labels.change_employee_benefits'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.leadership_level')
        %dd.app-check-your-answers__answer
          - if @vacancy.leadership
            = @vacancy.leadership.title
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'leadership'), 'aria-label': t('jobs.aria_labels.change_leadership_level'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.starts_on')
        %dd.app-check-your-answers__answer
          = format_date @vacancy.starts_on
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'starts_on'), 'aria-label': t('jobs.aria_labels.change_expected_start_date'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.ends_on')
        %dd.app-check-your-answers__answer
          = format_date @vacancy.ends_on
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_job_specification_path(@vacancy.id, anchor: 'ends_on'), 'aria-label': t('jobs.aria_labels.change_end_date'), class: 'govuk-link'

    %h2.govuk-heading-m.mb0
      = t('jobs.candidate_specification')

    .govuk-body-s.mb1
      = link_to edit_school_job_candidate_specification_path(@vacancy.id), class: 'govuk-link', 'aria-label': t('jobs.aria_labels.change_candidate_specification') do
        Change
        %span.govuk-visually-hidden the candidate specification

    %dl.app-check-your-answers.app-check-your-answers--short

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.education')
        %dd.app-check-your-answers__answer
          = @vacancy.education
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_candidate_specification_path(@vacancy.id, anchor: 'education'), 'aria-label': t('jobs.aria_labels.change_essential_educational_requirements'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.qualifications')
        %dd.app-check-your-answers__answer
          = @vacancy.qualifications
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_candidate_specification_path(@vacancy.id, anchor: 'qualifications'), 'aria-label': t('jobs.aria_labels.change_essential_qualifications'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.experience')
        %dd.app-check-your-answers__answer
          = @vacancy.experience
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_candidate_specification_path(@vacancy.id, anchor: 'experience'), 'aria-label': t('jobs.aria_labels.change_essential_skills_and_experience'), class: 'govuk-link'

    %h2.govuk-heading-m.mb0
      = t('jobs.application_details')

    .govuk-body-s.mb1
      = link_to edit_school_job_application_details_path(@vacancy.id), class: 'govuk-link', 'aria-label': t('jobs.aria_labels.change_application_details') do
        Change
        %span.govuk-visually-hidden the application details

    %dl.app-check-your-answers.app-check-your-answers--short

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.contact_email')
        %dd.app-check-your-answers__answer
          =mail_to 'Job contact email', @vacancy.contact_email, class: 'govuk-link', 'aria-label': t('jobs.aria_labels.contact_email_link', email: @vacancy.contact_email)
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_application_details_path(@vacancy.id, anchor: 'contact_email'), 'aria-label': t('jobs.aria_labels.change_job_contact_email'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.application_link')
        %dd.app-check-your-answers__answer
          = link_to @vacancy.application_link, class: 'govuk-link', 'aria-label': t('jobs.aria_labels.application_link_url', url: @vacancy.application_link) do
            %span.govuk-body-m.govuk-link= t('jobs.application_link_url')
            %br
            %span.govuk-body-s.govuk-link= @vacancy.application_link
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_application_details_path(@vacancy.id, anchor: 'application_link'), 'aria-label': t('jobs.aria_labels.change_application_link_URL'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.publication_date')
        %dd.app-check-your-answers__answer
          = format_date @vacancy.publish_on
        %dd.app-check-your-answers__change
          - unless @vacancy.published? && @vacancy.publish_on.past?
            = link_to t('buttons.change'), edit_school_job_application_details_path(@vacancy.id, anchor: 'publish_on'), 'aria-label': t('jobs.aria_labels.change_date_role_will_be_listed'), class: 'govuk-link'

      .app-check-your-answers__contents
        %dt.app-check-your-answers__question
          = t('jobs.application_deadline')
        %dd.app-check-your-answers__answer
          = format_date @vacancy.expires_on
          = t('jobs.time_at') unless @vacancy.expiry_time.nil?
          = format_time @vacancy.expiry_time
        %dd.app-check-your-answers__change
          = link_to t('buttons.change'), edit_school_job_application_details_path(@vacancy.id, anchor: 'expires_on'), 'aria-label': t('jobs.aria_labels.change_application_deadline'), class: 'govuk-link'
